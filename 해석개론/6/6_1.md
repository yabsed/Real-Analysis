# Section 6.1 The Riemann Integral

## 1. Upper and Lower Sums
**Definition (Partition):**
A partition $\mathcal{P}$ of a closed interval $[a, b]$ is a finite set of points $\{x_0, x_1, \dots, x_n\}$ such that:
$$a = x_0 < x_1 < \dots < x_n = b$$
Let $\Delta x_i = x_i - x_{i-1}$.

**Definition (Bounds):**
For a bounded function $f$ on $[a, b]$, on each subinterval $[x_{i-1}, x_i]$, define:
* $m_i = \inf \{f(t) : x_{i-1} \le t \le x_i\}$
* $M_i = \sup \{f(t) : x_{i-1} \le t \le x_i\}$

**Definition (Sums):**
* **Lower Sum:** $\mathcal{L}(\mathcal{P}, f) = \sum_{i=1}^n m_i \Delta x_i$ (Inscribed rectangles)
* **Upper Sum:** $\mathcal{U}(\mathcal{P}, f) = \sum_{i=1}^n M_i \Delta x_i$ (Circumscribed rectangles)

**Basic Inequality:**
For any partition $\mathcal{P}$:
$$\mathcal{L}(\mathcal{P}, f) \le \mathcal{U}(\mathcal{P}, f)$$

---

## 2. Upper and Lower Integrals
**Boundedness:**
If $m \le f(t) \le M$ for all $t$, then for any partition $\mathcal{P}$:
$$m(b-a) \le \mathcal{L}(\mathcal{P}, f) \le \mathcal{U}(\mathcal{P}, f) \le M(b-a)$$

**Refinement Lemma:**
A partition $\mathcal{P}^*$ is a **refinement** of $\mathcal{P}$ if $\mathcal{P} \subset \mathcal{P}^*$. Adding points improves the approximation:
$$\mathcal{L}(\mathcal{P}, f) \le \mathcal{L}(\mathcal{P}^*, f) \le \mathcal{U}(\mathcal{P}^*, f) \le \mathcal{U}(\mathcal{P}, f)$$
*Key Proof Idea:* Adding a point $x^*$ in $[x_{k-1}, x_k]$ splits the interval. Since the infimum over a subset is larger (or equal) and the supremum is smaller (or equal), the lower sum increases and the upper sum decreases.

**Comparison of Any Two Partitions:**
For *any* partitions $\mathcal{P}$ and $\mathcal{Q}$, $\mathcal{L}(\mathcal{P}, f) \le \mathcal{U}(\mathcal{Q}, f)$.
*(Proof uses the common refinement $\mathcal{P} \cup \mathcal{Q}$)*.

**Definition (Integrals):**
* **Lower Integral:** $\underline{\int_a^b} f = \sup_{\mathcal{P}} \mathcal{L}(\mathcal{P}, f)$
* **Upper Integral:** $\overline{\int_a^b} f = \inf_{\mathcal{P}} \mathcal{U}(\mathcal{P}, f)$

**Theorem 6.1.4:**
Always, $\underline{\int_a^b} f \le \overline{\int_a^b} f$.

---

## 3. Definition of the Riemann Integral
**Definition 6.1.5:**
A bounded function $f$ is **Riemann integrable** on $[a, b]$ (denoted $f \in \mathcal{R}[a, b]$) if:
$$\underline{\int_a^b} f = \overline{\int_a^b} f$$
The common value is denoted $\int_a^b f(x) dx$.

---

## 4. Examples
**(a) Dirichlet Function (Not Integrable):**
$f(x) = 1$ if $x \in \mathbb{Q}$, $0$ if $x \notin \mathbb{Q}$ on $[a, b]$.
* For any interval, density of rationals/irrationals implies $m_i = 0$ and $M_i = 1$.
* $\mathcal{L}(\mathcal{P}, f) = 0 \implies \underline{\int} f = 0$.
* $\mathcal{U}(\mathcal{P}, f) = b-a \implies \overline{\int} f = b-a$.
* Since $0 \ne b-a$, $f \notin \mathcal{R}[a, b]$.

**(b) Step Function:**
$f(x) = 0$ for $x < 1/2$, $f(x) = 1$ for $x \ge 1/2$ on $[0, 1]$.
* Proof involves isolating the discontinuity at $1/2$ within a small interval of the partition. The error term $\mathcal{U} - \mathcal{L}$ can be made arbitrarily small by shrinking the interval covering $1/2$.
* Result: $\int_0^1 f = 1/2$.

**(c) $f(x) = x$ on $[a, b]$:**
* $f$ is increasing $\implies m_i = x_{i-1}, M_i = x_i$.
* $\mathcal{U} - \mathcal{L} = \sum (x_i - x_{i-1})\Delta x_i$.
* By choosing equal width $\Delta x$, $\mathcal{U} - \mathcal{L} = \Delta x (b-a)$. As $\Delta x \to 0$, difference goes to 0.
* $\int_a^b x dx = \frac{1}{2}(b^2 - a^2)$.

**(d) $f(x) = x^2$ on $[0, 1]$:**
* Uses equal partitions. $m_i = (\frac{i-1}{n})^2, M_i = (\frac{i}{n})^2$.
* Calculations use sum of squares formula $\sum i^2 = \frac{1}{6}m(m+1)(2m+1)$.
* Taking limits as $n \to \infty$, both sums converge to $1/3$.

---

## 5. Riemann's Criterion for Integrability
**Theorem 6.1.7:**
$f \in \mathcal{R}[a, b]$ **if and only if** for every $\epsilon > 0$, there exists a partition $\mathcal{P}$ such that:
$$\mathcal{U}(\mathcal{P}, f) - \mathcal{L}(\mathcal{P}, f) < \epsilon$$

* *Significance:* Allows checking integrability without knowing the value of the integral.
* *Proof Key Idea:*
    * $\Rightarrow$: Use definitions of supremum and infimum to find partitions close to the integrals, then combine them.
    * $\Leftarrow$: If $\mathcal{U} - \mathcal{L} < \epsilon$, then $0 \le \overline{\int} - \underline{\int} < \epsilon$ for all $\epsilon$, forcing equality.

---

## 6. Integrability of Specific Classes of Functions
**Theorem 6.1.8:**
1.  **Continuous Functions:** If $f$ is continuous on $[a, b]$, it is integrable.
    * *Proof Idea:* Use **Uniform Continuity**. Given $\epsilon$, choose $\delta$ such that $|x-t|<\delta \implies |f(x)-f(t)| < \frac{\epsilon}{b-a}$. Then $M_i - m_i < \frac{\epsilon}{b-a}$. Summing gives $\mathcal{U} - \mathcal{L} < \epsilon$.
2.  **Monotone Functions:** If $f$ is monotone on $[a, b]$, it is integrable.
    * *Proof Idea:* Telescoping sum. For uniform partition with width $h$, $\sum (M_i - m_i)\Delta x_i = h \sum (f(x_i) - f(x_{i-1})) = h(f(b) - f(a))$. We can make $h$ small enough to satisfy the $\epsilon$ condition.

---

## 7. The Composition Theorem
**Theorem 6.1.9:**
If $f \in \mathcal{R}[a, b]$ with range in $[c, d]$ and $\varphi: [c, d] \to \mathbb{R}$ is **continuous**, then $\varphi \circ f \in \mathcal{R}[a, b]$.

* *Proof Key Idea:* Split indices $i$ into set $A$ (where oscillation of $f$ is small) and set $B$ (where oscillation is large).
    * In $A$, uniform continuity of $\varphi$ makes oscillation of $\varphi \circ f$ small.
    * Set $B$ has small total length because $f$ is integrable.
    * Combining these bounds proves $\mathcal{U}(\varphi \circ f) - \mathcal{L}(\varphi \circ f) < \epsilon$.

**Corollary 6.1.10:**
If $f$ is integrable, then $|f|$ and $f^2$ are integrable.

**Important Warning:** The composition of two Riemann integrable functions is **not** necessarily integrable (see Example 6.1.14b).

---

## 8. Lebesgue's Theorem
**Definition (Measure Zero):**
A set $E \subset \mathbb{R}$ has measure zero if for any $\epsilon > 0$, $E$ can be covered by a countable union of open intervals $\{I_n\}$ such that $\sum length(I_n) < \epsilon$.
* *Examples:* Finite sets, countable sets (like $\mathbb{Q}$), and even the Cantor set (uncountable) have measure zero.

**Theorem 6.1.13 (Lebesgue):**
A bounded function $f$ on $[a, b]$ is Riemann integrable **if and only if** the set of its discontinuities has **measure zero**.

**Applications:**
* Continuous functions: Discontinuity set is empty (measure 0) $\implies$ Integrable.
* Monotone functions: Discontinuities are countable (measure 0) $\implies$ Integrable.
* Function with finite discontinuities $\implies$ Integrable.

---

## 9. Advanced Examples (Lebesgue Application)
**(a) Thomaeâ€™s Function (Popcorn Function):**
$$f(x) = \begin{cases} 1/n & \text{if } x = m/n \text{ (lowest terms)} \\ 0 & \text{if } x \text{ is irrational} \end{cases}$$
* Continuous at all irrationals (measure of rationals is 0).
* Discontinuous at all rationals.
* By Lebesgue's Theorem, it is **integrable** and $\int_0^1 f = 0$.

**(b) Counter-example for Composition:**
Let $f$ be Thomae's function (integrable). Let $g(y) = 1$ if $y \in (0, 1]$, $g(0)=0$.
* $g$ is integrable (only discontinuous at 0).
* $g \circ f$ results in the Dirichlet function (1 at rationals, 0 at irrationals).
* $g \circ f$ is **not** integrable.
* Reason: $f$ maps rationals to non-zero values (where $g=1$) and irrationals to 0 (where $g=0$).